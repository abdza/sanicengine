{% macro transitionform(transition,record=None) -%}
<form method='POST' id='trackerform'>
	<input type='hidden' name='transition_id' value='{{transition.id}}'/>
	{% if record %}
	<input type='hidden' name='id' value='{{record['id']}}'/>
	{% endif %}

{% for field in transition.edit_fields_list() %}
<div class="form-group row">
	<label class="col-sm-2 col-form-label" for="{{ field.name }}">{{ field.label }}</label>
	{% if field.field_type in ['string','integer','number'] %}
	<input class="col-sm-10 form-control" id="{{ field.name }}" name="{{ field.name }}" value="{% if record %}{{record[field.name]}}{% endif %}" type="text">
	{% elif field.field_type=='text' %}
	<textarea class="col-sm-10 form-control" id="{{ field.name }}" name="{{ field.name }}">{% if record %}{{record[field.name]}}{% endif %}</textarea>
	{% elif field.field_type=='date' %}
	<input class="col-sm-10 form-control" id="{{ field.name }}" name="{{ field.name }}" value="{% if record %}{{record[field.name]}}{% endif %}" type="text">
	{% elif field.field_type=='datetime' %}
	<input class="col-sm-10 form-control" id="{{ field.name }}" name="{{ field.name }}" value="{% if record %}{{record[field.name]}}{% endif %}" type="text">
	{% elif field.field_type=='boolean' %}
	<input class="col-sm-10 form-control" id="{{ field.name }}" name="{{ field.name }}" value="" type="checkbox">
	{% endif %}
</div>
{% endfor %}
<input type='submit' value='Submit' class='btn btn-primary'>
</form>
{%- endmacro %}

{% macro recordslist(tracker) -%}
{% set list_fields = tracker.list_fields_list() %}
<table class='table'>
	<tr>
		<th>#</th>
		{% if list_fields %}
		{% for field in list_fields %}
		<th>{{field.label}}</th>
		{% endfor %}
		{% endif %}
	</tr>
	{% for record in tracker.records() %}
	<tr>
		<td><a href='{{ app.url_for('trackers.viewrecord',id=record.id,slug=tracker.slug) }}'>{{loop.index}}</a></td>
		{% if list_fields %}
		{% for field in list_fields %}
		<td>
			{{ record[field.name] }}
		</td>
		{% endfor %}
		{% endif %}
	</tr>
	{% endfor %}
</table>
{%- endmacro %}

{% macro displayrecord(tracker,record) -%}
<dl>
{% for field in tracker.list_fields_list() %}
<dt>{{ field.label }}</dt>
<dd>{{ record[field.name] }}</dd>
{% endfor %}
</dl>
{%- endmacro %}

{% macro transitionbuttons(tracker,record) -%}
{% for transition in tracker.activetransitions(record) %}
<a href='{{ app.url_for('trackers.editrecord',record_id=record['id'],transition_id=transition.id,slug=tracker.slug) }}' class='btn btn-primary'>
{{ transition.name }}
</a>
{% endfor %}
{%- endmacro %}
